<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Rackers | Sign Up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    <!-- Materialize CSS CDN link. Compiled and minified-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />

    <!-- Materialize Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
        crossorigin="anonymous">

    <!-- Google Fonts Link -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,600,700" rel="stylesheet" />
</head>

<body>
    <style>
        body {
        background: url("http://www.puppygames.net/images/ultratron/UT-twinshot-2.jpg") no-repeat center center fixed;
        background-size: cover;
        }

        /* nav styling */
        #navLogo {
          height: 35px;
        }
        #navLogoBox {
          margin-top: 0.25em;
          margin-left: 0.5em;
        }
        .nav-wrapper {
          background-color: #2f3738;
        }
        .sidenav {
          background-color: #2f3738;
        }
        .sidenav li>a {
          background-color: #000000;
          color: rgba(255, 255, 255, 0.8);
        }

        /* container styling */
        .mainContent {
          background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7));
          margin-top: 2em;
          margin-bottom: 1em;
          padding: 1em;
        }
        h6{
            color: white;
            margin-top: 1.5em;
            background-color: #647678;
            padding: 0.75em 0.75em 0.75em 0.75em;
        }

        /* footer styling */
        #footer {
          background-color: #647678;
        }
        #footer p {
          font-weight: 300;
        }
        footer i {
          width: 175px;
          margin-top: 0.5em;
        }
        </style>
    <!-- ========================= Nav Bar =======================-->
    <nav>
        <div class="nav-wrapper">
            <a href="/" class="brand-logo">
                <div id="navLogoBox">
                    <i class="fas fa-gamepad">Rackers</i>
                    <!-- <img id="navLogo" src="assets/images/rackers-logo.png" alt="Rackers Logo" /> -->
                </div>
            </a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="/">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <ul class="sidenav" id="mobile-demo">
        <li><a href="/">Sign In</a></li>
    </ul>

    <!-- ====================================== Main Content ==================================================== -->
    <div class="container">
        <div class="row">
            <div class="mainContent col s12">
                <!-- ================ user sign up spot ================ -->
                <div class="row">
                    <div class="user input col s10 offset-s1 intro">
                        <h6>Create an Account and to Jump into the Action Today!<i class="material-icons left">check_box</i></h6>
                        <input class="validate" placeholder="Name/Username (required)" id="name" name="name" type="text"
                            style="color: white" required />
                        <input class="validate" placeholder="Password (required)" id="password" name="password" type="password"
                            style="color: white" required//> <input class="validate" placeholder="Age (required)" id="age"
                            name="age" type="text" style="color: white" required="required" />
                        <button class="btn waves-effect waves-light signInBtn" id="createU" type="button" name="action">
                            sign-up <i class="material-icons right">send</i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="btmSpacer s12"></div>
    </div>

    <!-- ============================================ Footer =================================================-->
    <footer class="page-footer" id="footer">
        <div class="container">
            <div class="row">
                <div class="col s12 m4">
                    <i class="fas fa-gamepad">Rackers</i>
                    <!-- <img id="navLogo" src="assets/images/rackers-logo.png" alt="Rackers Logo" /> -->
                </div>
                <div class="col s12 m8">
                    <h6 class="grey-text text-lighten-1">Team Members</h6>
                    <p class="grey-text text-lighten-1">
                        This site is a combined effort between Matthew Taliancich, and Carlo Cabrera.
                        We're a group of web developers based out of Orlando, Fl.
                        We wanted to create an application that would be a safehaven of unbiased
                        movie reviews. We hope you enjoy our site.
                    </p>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                <p class="grey-text text-lighten-1">Created by Rackers</p>
            </div>
        </div>
    </footer>

    <!-- ======================================== JavaScript Links =========================================== -->

    <!-- Jquery CDN Link -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <!-- Materialize JavaScript CDN link. Compiled and minified- -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Local Javascript -->
    <script>
        // document ready shorthand
        $(function () {
            // sidnav control
            $(".sidenav").sidenav();
            // Getting references to our form and input
            var signUpForm = $("#createU");
            var passwordInput = $("#password")
            var nameInput = $("#name");
            var ageInput = $("#age");

            // When the signup button is clicked, we validate the name and age are not blank
            signUpForm.on("click", function (event) {
                console.log("create user button pressed")
                event.preventDefault();
                var userData = {
                    name: nameInput.val().trim().replace(/\s+/g, '-').toLowerCase(),
                    password: passwordInput.val().trim(),
                    age: ageInput.val().trim()
                };

                if (!userData.name || !userData.age || !passwordInput) {
                    return;
                };

                // If we have an name and age, run the signUpUser function
                signUpUser(userData.name, userData.password, userData.age);
                nameInput.val("");
                passwordInput.val("");
                ageInput.val("");
            });

            // Does a post to the users route. If successful, we are redirected to the members page
            // Otherwise we log any errors
            function signUpUser(name, password, age) {
                $.post("/api/users", {
                    name: name,
                    password: password,
                    age: age,
                }).then(function (data) {
                    console.log("this ran1")
                    window.location.replace(data);
                    // If there's an error, handle it by throwing up a bootstrap alert
                }).catch(function (err) {
                    console.log(err);
                });
            }

        });
    </script>
</body>

</html>